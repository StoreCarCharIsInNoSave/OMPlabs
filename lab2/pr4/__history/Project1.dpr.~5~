program Project1;
(*
  Орловский ПМ-12 вариант 15
  4.	Дана квадратная матрица A(nхn).
  Найти наибольший элемент среди стоящих
  на главной и побочной диагоналях и поменять
  его местами с элементом, стоящим на пересечении этих диагоналей.
*)
{$APPTYPE CONSOLE}
{$R *.res}

uses
  System.SysUtils;

var
  n, i, j,tempVaribleHandler, max,maxIndexI, maxIndexJ: integer;

var
  matrix: array of array of integer;

begin
  writeln('Введите размер квадратной матрицы');
  readln(n);
  setlength(matrix, n);
  for i := 0 to n - 1 do
  begin
    setlength(matrix[i], n);
  end;

  for i := 0 to n - 1 do
  begin
    for j := 0 to n - 1 do
    begin
      // write('Matrix[', i, '] = ');
      // readln(matrix[i][j]);
      matrix[i][j] := random(9) + 1;
    end;
  end;

  writeln('Матрица до преобразования');
  for i := 0 to n - 1 do
  begin
    for j := 0 to n - 1 do
    begin
      write(matrix[i][j], ' ');
    end;
    writeln;
  end;
  readln;

  max := matrix[0, 0];
  for i := 0 to n - 1 do
    for j := 0 to n - 1 do
      if ((i = j) or (i + j = n - 1)) and (max < matrix[i][j]) then begin
        maxIndexI:=i;
        maxIndexJ:=j;

      end;


  writeln('Максимальный элемент главной и побочной диагонали = ',matrix[maxindexi,maxindexj]);
  if n mod 2 = 0 then writeln('У матрицы с чётной размерностью не может быть пересечения') else begin

       tempVaribleHandler:=matrix[round(n/2)][round(n/2)];
        matrix[round(n/2)][round(n/2)]:=matrix[maxindexi,maxindexj];
         matrix[maxIndexI][maxIndexJ]:=tempVaribleHandler;

      writeln('Матрица после преобразования');
  for i := 0 to n - 1 do
  begin
    for j := 0 to n - 1 do
    begin
      write(matrix[i][j], ' ');
    end;
    writeln;
  end;
  end;


  readln;

end.
